"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8629],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>f});var o=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,o,a=function(e,t){if(null==e)return{};var r,o,a={},n=Object.keys(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=o.createContext({}),p=function(e){var t=o.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var r=e.components,a=e.mdxType,n=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(r),f=a,m=u["".concat(s,".").concat(f)]||u[f]||h[f]||n;return r?o.createElement(m,i(i({ref:t},c),{},{components:r})):o.createElement(m,i({ref:t},c))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=r.length,i=new Array(n);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<n;p++)i[p]=r[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}u.displayName="MDXCreateElement"},6729:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>h,frontMatter:()=>n,metadata:()=>l,toc:()=>p});var o=r(7462),a=(r(7294),r(3905));const n={},i=void 0,l={unversionedId:"Books/EffectiveJava3/Chapter-9/Chapter-9-Item-58-Prefer-for-each-loops-to-traditional-for-loops",id:"Books/EffectiveJava3/Chapter-9/Chapter-9-Item-58-Prefer-for-each-loops-to-traditional-for-loops",title:"Chapter-9-Item-58-Prefer-for-each-loops-to-traditional-for-loops",description:"Chapter 9. General Programming\uff08\u901a\u7528\u7a0b\u5e8f\u8bbe\u8ba1\uff09",source:"@site/docs/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-58-Prefer-for-each-loops-to-traditional-for-loops.md",sourceDirName:"Books/EffectiveJava3/Chapter-9",slug:"/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-58-Prefer-for-each-loops-to-traditional-for-loops",permalink:"/docs/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-58-Prefer-for-each-loops-to-traditional-for-loops",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-58-Prefer-for-each-loops-to-traditional-for-loops.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Chapter-9-Item-57-Minimize-the-scope-of-local-variables",permalink:"/docs/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-57-Minimize-the-scope-of-local-variables"},next:{title:"Chapter-9-Item-59-Know-and-use-the-libraries",permalink:"/docs/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-59-Know-and-use-the-libraries"}},s={},p=[{value:"Chapter 9. General Programming\uff08\u901a\u7528\u7a0b\u5e8f\u8bbe\u8ba1\uff09",id:"chapter-9-general-programming\u901a\u7528\u7a0b\u5e8f\u8bbe\u8ba1",level:2},{value:"Item 58: Prefer for-each loops to traditional for loops\uff08for-each \u5faa\u73af\u4f18\u4e8e\u4f20\u7edf\u7684 for \u5faa\u73af\uff09",id:"item-58-prefer-for-each-loops-to-traditional-for-loopsfor-each-\u5faa\u73af\u4f18\u4e8e\u4f20\u7edf\u7684-for-\u5faa\u73af",level:3}],c={toc:p};function h(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,o.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"chapter-9-general-programming\u901a\u7528\u7a0b\u5e8f\u8bbe\u8ba1"},"Chapter 9. General Programming\uff08\u901a\u7528\u7a0b\u5e8f\u8bbe\u8ba1\uff09"),(0,a.kt)("h3",{id:"item-58-prefer-for-each-loops-to-traditional-for-loopsfor-each-\u5faa\u73af\u4f18\u4e8e\u4f20\u7edf\u7684-for-\u5faa\u73af"},"Item 58: Prefer for-each loops to traditional for loops\uff08for-each \u5faa\u73af\u4f18\u4e8e\u4f20\u7edf\u7684 for \u5faa\u73af\uff09"),(0,a.kt)("p",null,"As discussed in Item 45, some tasks are best accomplished with streams, others with iteration. Here is a traditional for loop to iterate over a collection:"),(0,a.kt)("p",null,"\u6b63\u5982\u5728 ",(0,a.kt)("a",{parentName:"p",href:"./Chapter-7-Item-45-Use-streams-judiciously"},"Item-45")," \u4e2d\u6240\u8ba8\u8bba\u7684\uff0c\u4e00\u4e9b\u4efb\u52a1\u6700\u597d\u4f7f\u7528\u6d41\u6765\u5b8c\u6210\uff0c\u5176\u4ed6\u4efb\u52a1\u6700\u597d\u4f7f\u7528 iteration\u3002\u4e0b\u9762\u662f\u4f7f\u7528\u4e00\u4e2a\u4f20\u7edf\u7684 for \u5faa\u73af\u6765\u904d\u5386\u4e00\u4e2a\u96c6\u5408\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"// Not the best way to iterate over a collection!\nfor (Iterator<Element> i = c.iterator(); i.hasNext(); ) {\n    Element e = i.next();\n    ... // Do something with e\n}\n")),(0,a.kt)("p",null,"and here is a traditional for loop to iterate over an array:"),(0,a.kt)("p",null,"\u8fd9\u662f\u4f7f\u7528\u4f20\u7edf\u7684 for \u5faa\u73af\u6765\u904d\u5386\u6570\u7ec4\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"// Not the best way to iterate over an array!\nfor (int i = 0; i < a.length; i++) {\n    ... // Do something with a[i]\n}\n")),(0,a.kt)("p",null,"These idioms are better than while loops (Item 57), but they aren\u2019t perfect. The iterator and the index variables are both just clutter\u2014all you need are the elements. Furthermore, they represent opportunities for error. The iterator occurs three times in each loop and the index variable four, which gives you many chances to use the wrong variable. If you do, there is no guarantee that the compiler will catch the problem. Finally, the two loops are quite different, drawing unnecessary attention to the type of the container and adding a (minor) hassle to changing that type."),(0,a.kt)("p",null,"\u8fd9\u4e9b\u4e60\u60ef\u7528\u6cd5\u6bd4 while \u5faa\u73af\u66f4\u597d\uff08",(0,a.kt)("a",{parentName:"p",href:"./Chapter-9-Item-57-Minimize-the-scope-of-local-variables"},"Item-57"),"\uff09\uff0c\u4f46\u662f\u5b83\u4eec\u5e76\u4e0d\u5b8c\u7f8e\u3002\u8fed\u4ee3\u5668\u548c\u7d22\u5f15\u53d8\u91cf\u90fd\u5f88\u6df7\u4e71\uff08\u4f60\u53ea\u9700\u8981\u5143\u7d20\uff09\u3002\u6b64\u5916\uff0c\u5b83\u4eec\u6709\u51fa\u9519\u7684\u53ef\u80fd\u3002\u8fed\u4ee3\u5668\u5728\u6bcf\u4e2a\u5faa\u73af\u4e2d\u51fa\u73b0\u4e09\u6b21\uff0c\u7d22\u5f15\u53d8\u91cf\u51fa\u73b0\u56db\u6b21\uff0c\u8fd9\u4f7f\u5f97\u6709\u5f88\u591a\u673a\u4f1a\u4f7f\u7528\u5230\u9519\u8bef\u7684\u53d8\u91cf\u3002\u5982\u679c\u8fd9\u6837\u505a\uff0c\u5c31\u4e0d\u80fd\u4fdd\u8bc1\u7f16\u8bd1\u5668\u4f1a\u6355\u6349\u5230\u95ee\u9898\u3002\u6700\u540e\uff0c\u8fd9\u4e24\u4e2a\u5faa\u73af\u533a\u522b\u5f88\u5927\uff0c\uff08\u7b2c\u4e00\u4e2a\u4f8b\u5b50\uff09\u8fd8\u9700\u8981\u989d\u5916\u6ce8\u610f\u5bb9\u5668\u7c7b\u578b\uff0c\u5e76\u7ed9\u7c7b\u578b\u8f6c\u6362\u589e\u52a0\u5c0f\u9ebb\u70e6\u3002"),(0,a.kt)("p",null,"The for-each loop (officially known as the \u201cenhanced for statement\u201d) solves all of these problems. It gets rid of the clutter and the opportunity for error by hiding the iterator or index variable. The resulting idiom applies equally to collections and arrays, easing the process of switching the implementation type of a container from one to the other:"),(0,a.kt)("p",null,"for-each \u5faa\u73af\uff08\u5b98\u65b9\u79f0\u4e3a\u300cenhanced for \u8bed\u53e5\u300d\uff09\u89e3\u51b3\u4e86\u6240\u6709\u8fd9\u4e9b\u95ee\u9898\u3002\u5b83\u901a\u8fc7\u9690\u85cf\u8fed\u4ee3\u5668\u6216\u7d22\u5f15\u53d8\u91cf\u6765\u6d88\u9664\u6df7\u4e71\u548c\u51fa\u9519\u7684\u673a\u4f1a\u3002\u7531\u6b64\u4ea7\u751f\u7684\u4e60\u60ef\u7528\u6cd5\u540c\u6837\u9002\u7528\u4e8e\u96c6\u5408\u548c\u6570\u7ec4\uff0c\u4ece\u800c\u7b80\u5316\u4e86\u5c06\u5bb9\u5668\u7684\u5b9e\u73b0\u7c7b\u578b\u4ece\u4e00\u79cd\u8f6c\u6362\u4e3a\u53e6\u4e00\u79cd\u7684\u8fc7\u7a0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"// The preferred idiom for iterating over collections and arrays\nfor (Element e : elements) {\n    ... // Do something with e\n}\n")),(0,a.kt)("p",null,"When you see the colon (:), read it as \u201cin.\u201d Thus, the loop above reads as \u201cfor each element e in elements.\u201d There is no performance penalty for using for-each loops, even for arrays: the code they generate is essentially identical to the code you would write by hand."),(0,a.kt)("p",null,"\u5f53\u4f60\u770b\u5230\u5192\u53f7 ",(0,a.kt)("inlineCode",{parentName:"p"},"(:)")," \u65f6\uff0c\u8bf7\u5c06\u5176\u8bfb\u4f5c\u300cin\u300d\u3002\u56e0\u6b64\uff0c\u4e0a\u9762\u7684\u5faa\u73af\u8bfb\u4f5c\u300c\u5bf9\u5143\u7d20\u96c6\u7684\u6bcf\u4e2a\u5143\u7d20 e \u8fdb\u884c\u64cd\u4f5c\u300d\u3002\u4f7f\u7528 for-each \u5faa\u73af\u4e0d\u4f1a\u964d\u4f4e\u6027\u80fd\uff0c\u5bf9\u4e8e\u6570\u7ec4\u4e5f\u662f\u5982\u6b64\uff1a\u5b83\u4eec\u751f\u6210\u7684\u4ee3\u7801\u672c\u8d28\u4e0a\u4e0e\u4f60\u624b\u5de5\u7f16\u5199\u7684 for \u5faa\u73af\u4ee3\u7801\u76f8\u540c\u3002"),(0,a.kt)("p",null,"The advantages of the for-each loop over the traditional for loop are even greater when it comes to nested iteration. Here is a common mistake that people make when doing nested iteration:"),(0,a.kt)("p",null,"\u5f53\u6d89\u53ca\u5230\u5d4c\u5957\u8fed\u4ee3\u65f6\uff0cfor-each \u5faa\u73af\u76f8\u5bf9\u4e8e\u4f20\u7edf for \u5faa\u73af\u7684\u4f18\u52bf\u751a\u81f3\u66f4\u5927\u3002\u4e0b\u9762\u662f\u4eba\u4eec\u5728\u8fdb\u884c\u5d4c\u5957\u8fed\u4ee3\u65f6\u7ecf\u5e38\u72af\u7684\u4e00\u4e2a\u9519\u8bef\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"// Can you spot the bug?\nenum Suit { CLUB, DIAMOND, HEART, SPADE }\nenum Rank { ACE, DEUCE, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT,NINE, TEN, JACK, QUEEN, KING }\n...\nstatic Collection<Suit> suits = Arrays.asList(Suit.values());\nstatic Collection<Rank> ranks = Arrays.asList(Rank.values());\nList<Card> deck = new ArrayList<>();\nfor (Iterator<Suit> i = suits.iterator(); i.hasNext(); )\nfor (Iterator<Rank> j = ranks.iterator(); j.hasNext(); )\ndeck.add(new Card(i.next(), j.next()));\n")),(0,a.kt)("p",null,"Don\u2019t feel bad if you didn\u2019t spot the bug. Many expert programmers have made this mistake at one time or another. The problem is that the next method is called too many times on the iterator for the outer collection (suits). It should be called from the outer loop so that it is called once per suit, but instead it is called from the inner loop, so it is called once per card. After you run out of suits, the loop throws a NoSuchElementException."),(0,a.kt)("p",null,"\u5982\u679c\u4f60\u6ca1\u6709\u53d1\u73b0\u8fd9\u4e2abug\uff0c\u4e0d\u8981\u611f\u5230\u96be\u8fc7\u3002\u8bb8\u591a\u4e13\u4e1a\u7a0b\u5e8f\u5458\u90fd\u66fe\u72af\u8fc7\u8fd9\u6837\u7684\u9519\u8bef\u3002\u95ee\u9898\u662f\uff0c\u8fed\u4ee3\u5668\u5bf9\u5916\u90e8\u7684\u96c6\u5408 suits \u8c03\u7528\u4e86\u592a\u591a\u6b21 next \u65b9\u6cd5\u3002\u5b83\u5e94\u8be5\u4ece\u5916\u90e8\u5faa\u73af\u8c03\u7528\uff0c\u56e0\u6b64\u6bcf\u79cd\u82b1\u8272\u8c03\u7528\u4e00\u6b21\uff0c\u4f46\u5b83\u662f\u4ece\u5185\u90e8\u5faa\u73af\u8c03\u7528\u7684\uff0c\u56e0\u6b64\u6bcf\u4e00\u5f20\u724c\u8c03\u7528\u4e00\u6b21\u3002\u5728\u7528\u5b8c\u6240\u6709\u82b1\u8272\u4e4b\u540e\uff0c\u5faa\u73af\u629b\u51fa NoSuchElementException\u3002"),(0,a.kt)("p",null,"If you\u2019re really unlucky and the size of the outer collection is a multiple of the size of the inner collection\u2014perhaps because they\u2019re the same collection\u2014the loop will terminate normally, but it won\u2019t do what you want. For example, consider this ill-conceived attempt to print all the possible rolls of a pair of dice:"),(0,a.kt)("p",null,"\u5982\u679c\u771f\u7684\u5f88\u4e0d\u5e78\uff0c\u5916\u90e8\u96c6\u5408\u7684\u5927\u5c0f\u662f\u5185\u90e8\u96c6\u5408\u5927\u5c0f\u7684\u51e0\u500d\uff08\u53ef\u80fd\u56e0\u4e3a\u5b83\u4eec\u662f\u76f8\u540c\u7684\u96c6\u5408\uff09\uff0c\u5faa\u73af\u5c06\u6b63\u5e38\u7ec8\u6b62\uff0c\u4f46\u662f\u5b83\u4e0d\u4f1a\u6267\u884c\u4f60\u60f3\u8981\u7684\u64cd\u4f5c\u3002\u4f8b\u5982\uff0c\u8003\u8651\u4e00\u4e2a\u6253\u5370\u4e00\u5bf9\u9ab0\u5b50\u6240\u6709\u53ef\u80fd\u7684\u7ec4\u5408\u503c\u7684\u9519\u8bef\u5c1d\u8bd5\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'// Same bug, different symptom!\nenum Face { ONE, TWO, THREE, FOUR, FIVE, SIX }\n...\nCollection<Face> faces = EnumSet.allOf(Face.class);\nfor (Iterator<Face> i = faces.iterator(); i.hasNext(); )\nfor (Iterator<Face> j = faces.iterator(); j.hasNext(); )\nSystem.out.println(i.next() + " " + j.next());\n')),(0,a.kt)("p",null,"The program doesn\u2019t throw an exception, but it prints only the six \u201cdoubles\u201d (from \u201cONE ONE\u201d to \u201cSIX SIX\u201d), instead of the expected thirty-six combinations."),(0,a.kt)("p",null,"\u7a0b\u5e8f\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u4f46\u5b83\u53ea\u6253\u5370 6 \u4e2a\u91cd\u590d\u6570\u503c\uff08\u4ece\u300cONE ONE\u300d\u5230\u300cSIX SIX\u300d\uff09\uff0c\u800c\u4e0d\u662f\u9884\u671f\u7684 36 \u4e2a\u7ec4\u5408\u3002"),(0,a.kt)("p",null,"To fix the bugs in these examples, you must add a variable in the scope of the outer loop to hold the outer element:"),(0,a.kt)("p",null,"\u8981\u4fee\u590d\u8fd9\u4e9b\u4f8b\u5b50\u4e2d\u7684\u9519\u8bef\uff0c\u5fc5\u987b\u5728\u5916\u90e8\u5faa\u73af\u7684\u4f5c\u7528\u57df\u5185\u6dfb\u52a0\u4e00\u4e2a\u53d8\u91cf\u6765\u4fdd\u5b58\u5916\u90e8\u5143\u7d20\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"// Fixed, but ugly - you can do better!\nfor (Iterator<Suit> i = suits.iterator(); i.hasNext(); ) {\n    Suit suit = i.next();\n    for (Iterator<Rank> j = ranks.iterator(); j.hasNext(); )\n        deck.add(new Card(suit, j.next()));\n}\n")),(0,a.kt)("p",null,"If instead you use a nested for-each loop, the problem simply disappears. The resulting code is as succinct as you could wish for:"),(0,a.kt)("p",null,"\u76f8\u53cd\uff0c\u5982\u679c\u4f7f\u7528\u5d4c\u5957 for-each \u5faa\u73af\uff0c\u95ee\u9898\u5c31\u4f1a\u6d88\u5931\u3002\u751f\u6210\u7684\u4ee3\u7801\u66f4\u7b80\u6d01\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"// Preferred idiom for nested iteration on collections and arrays\nfor (Suit suit : suits)\nfor (Rank rank : ranks)\ndeck.add(new Card(suit, rank));\n")),(0,a.kt)("p",null,"Unfortunately, there are three common situations where you can\u2019t use foreach:"),(0,a.kt)("p",null,"\u4e0d\u5e78\u7684\u662f\uff0c\u6709\u4e09\u79cd\u5e38\u89c1\u7684\u60c5\u51b5\u4f60\u4e0d\u5e94\u4f7f\u7528 for-each\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Destructive filtering")," \u2014If you need to traverse a collection removing selected elements, then you need to use an explicit iterator so that you can call its remove method. You can often avoid explicit traversal by using Collection\u2019s removeIf method, added in Java 8.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u7834\u574f\u6027\u8fc7\u6ee4"),"\uff0c\u5982\u679c\u9700\u8981\u904d\u5386\u4e00\u4e2a\u96c6\u5408\u5e76\u5220\u9664\u9009\u5b9a\u5143\u7d20\uff0c\u5219\u9700\u8981\u4f7f\u7528\u663e\u5f0f\u7684\u8fed\u4ee3\u5668\uff0c\u4ee5\u4fbf\u8c03\u7528\u5176 remove \u65b9\u6cd5\u3002\u901a\u8fc7\u4f7f\u7528 Collection \u5728 Java 8 \u4e2d\u6dfb\u52a0\u7684 removeIf \u65b9\u6cd5\uff0c\u901a\u5e38\u53ef\u4ee5\u907f\u514d\u663e\u5f0f\u904d\u5386\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Transforming")," \u2014If you need to traverse a list or array and replace some or all of the values of its elements, then you need the list iterator or array index in order to replace the value of an element.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u8f6c\u6362"),"\uff0c\u5982\u679c\u9700\u8981\u904d\u5386\u4e00\u4e2a List \u6216\u6570\u7ec4\u5e76\u66ff\u6362\u5176\u4e2d\u90e8\u5206\u6216\u5168\u90e8\u5143\u7d20\u7684\u503c\uff0c\u90a3\u4e48\u9700\u8981 List \u8fed\u4ee3\u5668\u6216\u6570\u7ec4\u7d22\u5f15\u6765\u66ff\u6362\u5143\u7d20\u7684\u503c\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Parallel iteration")," \u2014If you need to traverse multiple collections in parallel, then you need explicit control over the iterator or index variable so that all iterators or index variables can be advanced in lockstep (as demonstrated unintentionally in the buggy card and dice examples above). If you find yourself in any of these situations, use an ordinary for loop and be wary of the traps mentioned in this item.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5e76\u884c\u8fed\u4ee3"),"\uff0c\u5982\u679c\u9700\u8981\u5e76\u884c\u904d\u5386\u591a\u4e2a\u96c6\u5408\uff0c\u90a3\u4e48\u9700\u8981\u663e\u5f0f\u5730\u63a7\u5236\u8fed\u4ee3\u5668\u6216\u7d22\u5f15\u53d8\u91cf\uff0c\u4ee5\u4fbf\u6240\u6709\u8fed\u4ee3\u5668\u6216\u7d22\u5f15\u53d8\u91cf\u90fd\u53ef\u4ee5\u540c\u6b65\u6267\u884c\uff08\u5982\u4e0a\u8ff0\u724c\u548c\u9ab0\u5b50\u793a\u4f8b\u4e2d\u65e0\u610f\u4e2d\u6f14\u793a\u7684\u9519\u8bef\u90a3\u6837\uff09\u3002\u5982\u679c\u53d1\u73b0\u81ea\u5df1\u5904\u4e8e\u8fd9\u4e9b\u60c5\u51b5\u4e2d\u7684\u4efb\u4f55\u4e00\u79cd\uff0c\u8bf7\u4f7f\u7528\u666e\u901a\u7684 for \u5faa\u73af\uff0c\u5e76\u8b66\u60d5\u672c\u6761\u76ee\u4e2d\u63d0\u5230\u7684\u9677\u9631\u3002"),(0,a.kt)("p",null,"Not only does the for-each loop let you iterate over collections and arrays, it lets you iterate over any object that implements the Iterable interface, which consists of a single method. Here is how the interface looks:"),(0,a.kt)("p",null,"for-each \u5faa\u73af\u4e0d\u4ec5\u5141\u8bb8\u904d\u5386\u96c6\u5408\u548c\u6570\u7ec4\uff0c\u8fd8\u5141\u8bb8\u904d\u5386\u5b9e\u73b0 Iterable \u63a5\u53e3\u7684\u4efb\u4f55\u5bf9\u8c61\uff0c\u8be5\u63a5\u53e3\u7531\u4e00\u4e2a\u65b9\u6cd5\u7ec4\u6210\u3002\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"public interface Iterable<E> {\n    // Returns an iterator over the elements in this iterable\n    Iterator<E> iterator();\n}\n")),(0,a.kt)("p",null,"It is a bit tricky to implement Iterable if you have to write your own Iterator implementation from scratch, but if you are writing a type that represents a group of elements, you should strongly consider having it implement Iterable, even if you choose not to have it implement Collection. This will allow your users to iterate over your type using the foreach loop, and they will be forever grateful."),(0,a.kt)("p",null,"\u5982\u679c\u5fc5\u987b\u4ece\u5934\u5f00\u59cb\u7f16\u5199\u81ea\u5df1\u7684 Iterator \u5b9e\u73b0\uff0c\u786e\u5b9e\u6709\u70b9\u68d8\u624b\uff0c\u4f46\u662f\u5982\u679c\u6b63\u5728\u7f16\u5199\u7684\u7c7b\u578b\u8868\u793a\u4e00\u7ec4\u5143\u7d20\uff0c\u5373\u4f7f\u9009\u62e9\u4e0d\u8ba9\u5b83\u5b9e\u73b0 Collection\uff0c\u90a3\u4e48\u4e5f\u5e94\u8be5\u5f3a\u70c8\u8003\u8651\u8ba9\u5b83\u5b9e\u73b0 Iterable\u3002\u8fd9\u5c06\u5141\u8bb8\u7528\u6237\u4f7f\u7528 foreach \u5faa\u73af\u904d\u5386\u7c7b\u578b\uff0c\u4ed6\u4eec\u5c06\u6c38\u8fdc\u611f\u6fc0\u4e0d\u5c3d\u3002"),(0,a.kt)("p",null,"In summary, the for-each loop provides compelling advantages over the traditional for loop in clarity, flexibility, and bug prevention, with no performance penalty. Use for-each loops in preference to for loops wherever you can."),(0,a.kt)("p",null,"\u603b\u4e4b\uff0cfor-each \u5faa\u73af\u5728\u6e05\u6670\u5ea6\u3001\u7075\u6d3b\u6027\u548c bug \u9884\u9632\u65b9\u9762\u6bd4\u4f20\u7edf\u7684 for \u5faa\u73af\u66f4\u6709\u4f18\u52bf\uff0c\u5e76\u4e14\u6ca1\u6709\u6027\u80fd\u635f\u5931\u3002\u5c3d\u53ef\u80fd\u4f7f\u7528 for-each \u5faa\u73af\u800c\u4e0d\u662f for \u5faa\u73af\u3002"),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("a",{parentName:"strong",href:"./Chapter-9-Introduction"},"Back to contents of the chapter\uff08\u8fd4\u56de\u7ae0\u8282\u76ee\u5f55\uff09"))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Previous Item\uff08\u4e0a\u4e00\u6761\u76ee\uff09\uff1a",(0,a.kt)("a",{parentName:"strong",href:"./Chapter-9-Item-57-Minimize-the-scope-of-local-variables"},"Item 57: Minimize the scope of local variables\uff08\u5c06\u5c40\u90e8\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u6700\u5c0f\u5316\uff09"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Next Item\uff08\u4e0b\u4e00\u6761\u76ee\uff09\uff1a",(0,a.kt)("a",{parentName:"strong",href:"./Chapter-9-Item-59-Know-and-use-the-libraries"},"Item 59: Know and use the libraries\uff08\u4e86\u89e3\u5e76\u4f7f\u7528\u5e93\uff09")))))}h.isMDXComponent=!0}}]);