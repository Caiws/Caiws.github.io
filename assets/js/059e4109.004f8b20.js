"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7042],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>p});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),u=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=u(a),p=n,c=h["".concat(l,".").concat(p)]||h[p]||m[p]||o;return a?r.createElement(c,i(i({ref:t},d),{},{components:a})):r.createElement(c,i({ref:t},d))}));function p(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var u=2;u<o;u++)i[u]=a[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}h.displayName="MDXCreateElement"},8765:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var r=a(7462),n=(a(7294),a(3905));const o={},i=void 0,s={unversionedId:"Books/EffectiveJava3/Chapter-9/Chapter-9-Item-59-Know-and-use-the-libraries",id:"Books/EffectiveJava3/Chapter-9/Chapter-9-Item-59-Know-and-use-the-libraries",title:"Chapter-9-Item-59-Know-and-use-the-libraries",description:"Chapter 9. General Programming\uff08\u901a\u7528\u7a0b\u5e8f\u8bbe\u8ba1\uff09",source:"@site/docs/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-59-Know-and-use-the-libraries.md",sourceDirName:"Books/EffectiveJava3/Chapter-9",slug:"/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-59-Know-and-use-the-libraries",permalink:"/docs/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-59-Know-and-use-the-libraries",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-59-Know-and-use-the-libraries.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Chapter-9-Item-58-Prefer-for-each-loops-to-traditional-for-loops",permalink:"/docs/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-58-Prefer-for-each-loops-to-traditional-for-loops"},next:{title:"Chapter-9-Item-60-Avoid-float-and-double-if-exact-answers-are-required",permalink:"/docs/Books/EffectiveJava3/Chapter-9/Chapter-9-Item-60-Avoid-float-and-double-if-exact-answers-are-required"}},l={},u=[{value:"Chapter 9. General Programming\uff08\u901a\u7528\u7a0b\u5e8f\u8bbe\u8ba1\uff09",id:"chapter-9-general-programming\u901a\u7528\u7a0b\u5e8f\u8bbe\u8ba1",level:2},{value:"Item 59: Know and use the libraries\uff08\u4e86\u89e3\u5e76\u4f7f\u7528\u5e93\uff09",id:"item-59-know-and-use-the-libraries\u4e86\u89e3\u5e76\u4f7f\u7528\u5e93",level:3}],d={toc:u};function m(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"chapter-9-general-programming\u901a\u7528\u7a0b\u5e8f\u8bbe\u8ba1"},"Chapter 9. General Programming\uff08\u901a\u7528\u7a0b\u5e8f\u8bbe\u8ba1\uff09"),(0,n.kt)("h3",{id:"item-59-know-and-use-the-libraries\u4e86\u89e3\u5e76\u4f7f\u7528\u5e93"},"Item 59: Know and use the libraries\uff08\u4e86\u89e3\u5e76\u4f7f\u7528\u5e93\uff09"),(0,n.kt)("p",null,"Suppose you want to generate random integers between zero and some upper bound. Faced with this common task, many programmers would write a little method that looks something like this:"),(0,n.kt)("p",null,"\u5047\u8bbe\u4f60\u60f3\u8981\u751f\u6210 0 \u5230\u67d0\u4e2a\u4e0a\u754c\u4e4b\u95f4\u7684\u968f\u673a\u6574\u6570\u3002\u9762\u5bf9\u8fd9\u4e2a\u5e38\u89c1\u4efb\u52a1\uff0c\u8bb8\u591a\u7a0b\u5e8f\u5458\u4f1a\u7f16\u5199\u4e00\u4e2a\u7c7b\u4f3c\u8fd9\u6837\u7684\u5c0f\u65b9\u6cd5\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"// Common but deeply flawed!\nstatic Random rnd = new Random();\nstatic int random(int n) {\n    return Math.abs(rnd.nextInt()) % n;\n}\n")),(0,n.kt)("p",null,"This method may look good, but it has three flaws. The first is that if n is a small power of two, the sequence of random numbers will repeat itself after a fairly short period. The second flaw is that if n is not a power of two, some numbers will, on average, be returned more frequently than others. If n is large, this effect can be quite pronounced. This is powerfully demonstrated by the following program, which generates a million random numbers in a carefully chosen range and then prints out how many of the numbers fell in the lower half of the range:"),(0,n.kt)("p",null,"\u8fd9\u4e2a\u65b9\u6cd5\u770b\u8d77\u6765\u4e0d\u9519\uff0c\u4f46\u5b83\u6709\u4e09\u4e2a\u7f3a\u70b9\u3002\u9996\u5148\uff0c\u5982\u679c n \u662f\u5c0f\u7684\u5e73\u65b9\u6570\uff0c\u968f\u673a\u6570\u5e8f\u5217\u4f1a\u5728\u76f8\u5f53\u77ed\u7684\u65f6\u95f4\u5185\u91cd\u590d\u3002\u7b2c\u4e8c\u4e2a\u7f3a\u9677\u662f\uff0c\u5982\u679c n \u4e0d\u662f 2 \u7684\u5e42\uff0c\u90a3\u4e48\u5e73\u5747\u800c\u8a00\uff0c\u4e00\u4e9b\u6570\u5b57\u5c06\u6bd4\u5176\u4ed6\u6570\u5b57\u66f4\u9891\u7e41\u5730\u8fd4\u56de\u3002\u5982\u679c n \u5f88\u5927\uff0c\u8fd9\u79cd\u6548\u679c\u4f1a\u5f88\u660e\u663e\u3002\u4e0b\u9762\u7684\u7a0b\u5e8f\u6709\u529b\u5730\u8bc1\u660e\u4e86\u8fd9\u4e00\u70b9\uff0c\u5b83\u5728\u4e00\u4e2a\u7cbe\u5fc3\u9009\u62e9\u7684\u8303\u56f4\u5185\u751f\u6210 100 \u4e07\u4e2a\u968f\u673a\u6570\uff0c\u7136\u540e\u6253\u5370\u51fa\u6709\u591a\u5c11\u4e2a\u6570\u5b57\u843d\u5728\u8303\u56f4\u7684\u4e0b\u534a\u90e8\u5206\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"public static void main(String[] args) {\n    int n = 2 * (Integer.MAX_VALUE / 3);\n    int low = 0;\n    for (int i = 0; i < 1000000; i++)\n        if (random(n) < n/2)\n    low++;\n    System.out.println(low);\n}\n")),(0,n.kt)("p",null,"If the random method worked properly, the program would print a number close to half a million, but if you run it, you\u2019ll find that it prints a number close to 666,666. Two-thirds of the numbers generated by the random method fall in the lower half of its range!"),(0,n.kt)("p",null,"\u5982\u679c random \u65b9\u6cd5\u5de5\u4f5c\u6b63\u5e38\uff0c\u7a0b\u5e8f\u5c06\u8f93\u51fa\u4e00\u4e2a\u63a5\u8fd1 50 \u4e07\u7684\u6570\u5b57\uff0c\u4f46\u662f\u5982\u679c\u8fd0\u884c\u5b83\uff0c\u4f60\u5c06\u53d1\u73b0\u5b83\u8f93\u51fa\u4e00\u4e2a\u63a5\u8fd1 666666 \u7684\u6570\u5b57\u3002\u968f\u673a\u65b9\u6cd5\u751f\u6210\u7684\u6570\u5b57\u4e2d\u6709\u4e09\u5206\u4e4b\u4e8c\u843d\u5728\u5176\u8303\u56f4\u7684\u4e0b\u534a\u90e8\u5206\uff01"),(0,n.kt)("p",null,"The third flaw in the random method is that it can, on rare occasions, fail catastrophically, returning a number outside the specified range. This is so because the method attempts to map the value returned by rnd.nextInt() to a non-negative int by calling Math.abs. If nextInt() returns Integer.MIN_VALUE, Math.abs will also return Integer.MIN_VALUE, and the remainder operator (%) will return a negative number, assuming n is not a power of two. This will almost certainly cause your program to fail, and the failure may be difficult to reproduce."),(0,n.kt)("p",null,"random \u65b9\u6cd5\u7684\u7b2c\u4e09\u4e2a\u7f3a\u9677\u662f\uff0c\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56de\u8d85\u51fa\u6307\u5b9a\u8303\u56f4\u7684\u6570\u5b57\uff0c\u8fd9\u662f\u707e\u96be\u6027\u7684\u7ed3\u679c\u3002\u8fd9\u662f\u56e0\u4e3a\u8be5\u65b9\u6cd5\u8bd5\u56fe\u901a\u8fc7\u8c03\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"Math.abs")," \u5c06 ",(0,n.kt)("inlineCode",{parentName:"p"},"rnd.nextInt()")," \u8fd4\u56de\u7684\u503c\u6620\u5c04\u5230\u975e\u8d1f\u6574\u6570\u3002\u5982\u679c ",(0,n.kt)("inlineCode",{parentName:"p"},"nextInt()")," \u8fd4\u56de\u6574\u6570\u3002",(0,n.kt)("inlineCode",{parentName:"p"},"Integer.MIN_VALUE"),"\u3001",(0,n.kt)("inlineCode",{parentName:"p"},"Math.abs")," \u4e5f\u5c06\u8fd4\u56de\u6574\u6570\u3002\u5047\u8bbe n \u4e0d\u662f 2 \u7684\u5e42\uff0c\u90a3\u4e48 ",(0,n.kt)("inlineCode",{parentName:"p"},"Integer.MIN_VALUE")," \u548c\u6c42\u6a21\u8fd0\u7b97\u7b26 ",(0,n.kt)("inlineCode",{parentName:"p"},"(%)")," \u5c06\u8fd4\u56de\u4e00\u4e2a\u8d1f\u6570\u3002\u51e0\u4e4e\u80af\u5b9a\u7684\u662f\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u4f60\u7684\u7a0b\u5e8f\u5931\u8d25\uff0c\u5e76\u4e14\u8fd9\u79cd\u5931\u8d25\u53ef\u80fd\u96be\u4ee5\u91cd\u73b0\u3002"),(0,n.kt)("p",null,"To write a version of the random method that corrects these flaws, you\u2019d have to know a fair amount about pseudorandom number generators, number theory, and two\u2019s complement arithmetic. Luckily, you don\u2019t have to do this\u2014 it\u2019s been done for you. It\u2019s called Random.nextInt(int). You needn\u2019t concern yourself with the details of how it does its job (although you can study the documentation or the source code if you\u2019re curious). A senior engineer with a background in algorithms spent a good deal of time designing, implementing, and testing this method and then showed it to several experts in the field to make sure it was right. Then the library was beta tested, released, and used extensively by millions of programmers for almost two decades. No flaws have yet been found in the method, but if a flaw were to be discovered, it would be fixed in the next release. ",(0,n.kt)("strong",{parentName:"p"},"By using a standard library, you take advantage of the knowledge of the experts who wrote it and the experience of those who used it before you.")),(0,n.kt)("p",null,"\u8981\u7f16\u5199\u4e00\u4e2a random \u65b9\u6cd5\u6765\u7ea0\u6b63\u8fd9\u4e9b\u7f3a\u9677\uff0c\u4f60\u5fc5\u987b\u5bf9\u4f2a\u968f\u673a\u6570\u751f\u6210\u5668\u3001\u6570\u8bba\u548c 2 \u7684\u8865\u7801\u7b97\u6cd5\u6709\u4e00\u5b9a\u7684\u4e86\u89e3\u3002\u5e78\u8fd0\u7684\u662f\uff0c\u4f60\u4e0d\u5fc5\u8fd9\u6837\u505a\uff08\u8fd9\u662f\u4e3a\u4f60\u800c\u505a\u7684\u6210\u679c\uff09\u3002\u5b83\u88ab\u79f0\u4e3a ",(0,n.kt)("inlineCode",{parentName:"p"},"Random.nextInt(int)"),"\u3002\u4f60\u4e0d\u5fc5\u5173\u5fc3\u5b83\u5982\u4f55\u5de5\u4f5c\u7684\uff08\u5c3d\u7ba1\u5982\u679c\u4f60\u611f\u5174\u8da3\uff0c\u53ef\u4ee5\u7814\u7a76\u6587\u6863\u6216\u6e90\u4ee3\u7801\uff09\u3002\u4e00\u4f4d\u5177\u6709\u7b97\u6cd5\u80cc\u666f\u7684\u9ad8\u7ea7\u5de5\u7a0b\u5e08\u82b1\u4e86\u5927\u91cf\u65f6\u95f4\u8bbe\u8ba1\u3001\u5b9e\u73b0\u548c\u6d4b\u8bd5\u8fd9\u79cd\u65b9\u6cd5\uff0c\u7136\u540e\u5c06\u5176\u5c55\u793a\u7ed9\u8be5\u9886\u57df\u7684\u51e0\u4f4d\u4e13\u5bb6\uff0c\u4ee5\u786e\u4fdd\u5b83\u662f\u6b63\u786e\u7684\u3002\u7136\u540e\uff0c\u8fd9\u4e2a\u5e93\u7ecf\u8fc7 beta \u6d4b\u8bd5\u3001\u53d1\u5e03\uff0c\u5e76\u88ab\u6570\u767e\u4e07\u7a0b\u5e8f\u5458\u5e7f\u6cdb\u4f7f\u7528\u4e86\u8fd1 20 \u5e74\u3002\u8be5\u65b9\u6cd5\u8fd8\u6ca1\u6709\u53d1\u73b0\u4efb\u4f55\u7f3a\u9677\uff0c\u4f46\u662f\u5982\u679c\u53d1\u73b0\u4e86\u7f3a\u9677\uff0c\u5c06\u5728\u4e0b\u4e00\u4e2a\u7248\u672c\u4e2d\u8fdb\u884c\u4fee\u590d\u3002",(0,n.kt)("strong",{parentName:"p"},"\u901a\u8fc7\u4f7f\u7528\u6807\u51c6\u5e93\uff0c\u4f60\u53ef\u4ee5\u5229\u7528\u7f16\u5199\u5b83\u7684\u4e13\u5bb6\u7684\u77e5\u8bc6\u548c\u4ee5\u524d\u4f7f\u7528\u5b83\u7684\u4eba\u7684\u7ecf\u9a8c\u3002")),(0,n.kt)("p",null,"As of Java 7, you should no longer use Random. For most uses, ",(0,n.kt)("strong",{parentName:"p"},"the random number generator of choice is now ThreadLocalRandom.")," It produces higher quality random numbers, and it\u2019s very fast. On my machine, it is 3.6 times faster than Random. For fork join pools and parallel streams, use SplittableRandom."),(0,n.kt)("p",null,"\u4ece Java 7 \u5f00\u59cb\uff0c\u5c31\u4e0d\u5e94\u8be5\u518d\u4f7f\u7528 Random\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c",(0,n.kt)("strong",{parentName:"p"},"\u9009\u62e9\u7684\u968f\u673a\u6570\u751f\u6210\u5668\u73b0\u5728\u662f ThreadLocalRandom\u3002")," \u5b83\u80fd\u4ea7\u751f\u66f4\u9ad8\u8d28\u91cf\u7684\u968f\u673a\u6570\uff0c\u800c\u4e14\u901f\u5ea6\u975e\u5e38\u5feb\u3002\u5728\u6211\u7684\u673a\u5668\u4e0a\uff0c\u5b83\u6bd4 Random \u5feb 3.6 \u500d\u3002\u5bf9\u4e8e fork \u8fde\u63a5\u6c60\u548c\u5e76\u884c\u6d41\uff0c\u4f7f\u7528 SplittableRandom\u3002"),(0,n.kt)("p",null,"A second advantage of using the libraries is that you don\u2019t have to waste your time writing ad hoc solutions to problems that are only marginally related to your work. If you are like most programmers, you\u2019d rather spend your time working on your application than on the underlying plumbing."),(0,n.kt)("p",null,"\u4f7f\u7528\u8fd9\u4e9b\u5e93\u7684\u7b2c\u4e8c\u4e2a\u597d\u5904\u662f\uff0c\u4f60\u4e0d\u5fc5\u6d6a\u8d39\u65f6\u95f4\u4e3a\u90a3\u4e9b\u4e0e\u4f60\u7684\u5de5\u4f5c\u65e0\u5173\u7684\u95ee\u9898\u7f16\u5199\u4e13\u95e8\u7684\u89e3\u51b3\u65b9\u6848\u3002\u5982\u679c\u4f60\u50cf\u5927\u591a\u6570\u7a0b\u5e8f\u5458\u4e00\u6837\uff0c\u90a3\u4e48\u4f60\u5b81\u613f\u5c06\u65f6\u95f4\u82b1\u5728\u5e94\u7528\u7a0b\u5e8f\u4e0a\uff0c\u800c\u4e0d\u662f\u5e95\u5c42\u7ba1\u9053\u4e0a\u3002"),(0,n.kt)("p",null,"A third advantage of using standard libraries is that their performance tends to improve over time, with no effort on your part. Because many people use them and because they\u2019re used in industry-standard benchmarks, the organizations that supply these libraries have a strong incentive to make them run faster. Many of the Java platform libraries have been rewritten over the years, sometimes repeatedly, resulting in dramatic performance improvements. A fourth advantage of using libraries is that they tend to gain functionality over time. If a library is missing something, the developer community will make it known, and the missing functionality may get added in a subsequent release."),(0,n.kt)("p",null,"\u4f7f\u7528\u6807\u51c6\u5e93\u7684\u7b2c\u4e09\u4e2a\u4f18\u70b9\u662f\uff0c\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0c\u5b83\u4eec\u7684\u6027\u80fd\u4f1a\u4e0d\u65ad\u63d0\u9ad8\uff0c\u800c\u4f60\u65e0\u9700\u4ed8\u51fa\u4efb\u4f55\u52aa\u529b\u3002\u7531\u4e8e\u8bb8\u591a\u4eba\u4f7f\u7528\u5b83\u4eec\uff0c\u800c\u4e14\u5b83\u4eec\u662f\u5728\u884c\u4e1a\u6807\u51c6\u57fa\u51c6\u4e2d\u4f7f\u7528\u7684\uff0c\u6240\u4ee5\u63d0\u4f9b\u8fd9\u4e9b\u5e93\u7684\u7ec4\u7ec7\u6709\u5f88\u5f3a\u7684\u52a8\u673a\u4f7f\u5b83\u4eec\u8fd0\u884c\u5f97\u66f4\u5feb\u3002\u591a\u5e74\u6765\uff0c\u8bb8\u591a Java \u5e73\u53f0\u5e93\u90fd\u88ab\u91cd\u65b0\u7f16\u5199\u8fc7\uff0c\u6709\u65f6\u751a\u81f3\u662f\u53cd\u590d\u7f16\u5199\uff0c\u4ece\u800c\u5e26\u6765\u4e86\u663e\u8457\u7684\u6027\u80fd\u6539\u8fdb\u3002\u4f7f\u7528\u5e93\u7684\u7b2c\u56db\u4e2a\u597d\u5904\u662f\uff0c\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0c\u5b83\u4eec\u5f80\u5f80\u4f1a\u83b7\u5f97\u65b0\u529f\u80fd\u3002\u5982\u679c\u4e00\u4e2a\u5e93\u4e22\u5931\u4e86\u4e00\u4e9b\u4e1c\u897f\uff0c\u5f00\u53d1\u4eba\u5458\u793e\u533a\u4f1a\u5c06\u5176\u516c\u5e03\u4e8e\u4f17\uff0c\u5e76\u4e14\u4e22\u5931\u7684\u529f\u80fd\u53ef\u80fd\u4f1a\u5728\u540e\u7eed\u7248\u672c\u4e2d\u6dfb\u52a0\u3002"),(0,n.kt)("p",null,"A final advantage of using the standard libraries is that you place your code in the mainstream. Such code is more easily readable, maintainable, and reusable by the multitude of developers."),(0,n.kt)("p",null,"\u4f7f\u7528\u6807\u51c6\u5e93\u7684\u6700\u540e\u4e00\u4e2a\u597d\u5904\u662f\uff0c\u53ef\u4ee5\u5c06\u4ee3\u7801\u653e\u5728\u4e3b\u5e72\u4e2d\u3002\u8fd9\u6837\u7684\u4ee3\u7801\u66f4\u5bb9\u6613\u88ab\u5f00\u53d1\u4eba\u5458\u9605\u8bfb\u3001\u7ef4\u62a4\u548c\u590d\u7528\u3002"),(0,n.kt)("p",null,"Given all these advantages, it seems only logical to use library facilities in preference to ad hoc implementations, yet many programmers don\u2019t. Why not? Perhaps they don\u2019t know the library facilities exist. ",(0,n.kt)("strong",{parentName:"p"},"Numerous features are added to the libraries in every major release, and it pays to keep abreast of these additions.")," Each time there is a major release of the Java platform, a web page is published describing its new features. These pages are well worth reading ","[Java8-feat, Java9-feat]",". To reinforce this point, suppose you wanted to write a program to print the contents of a URL specified on the command line (which is roughly what the Linux curl command does). Prior to Java 9, this code was a bit tedious, but in Java 9 the transferTo method was added to InputStream. Here is a complete program to perform this task using this new method:"),(0,n.kt)("p",null,"\u8003\u8651\u5230\u6240\u6709\u8fd9\u4e9b\u4f18\u70b9\uff0c\u4f7f\u7528\u5e93\u5de5\u5177\u800c\u4e0d\u9009\u62e9\u4e13\u95e8\u7684\u5b9e\u73b0\u4f3c\u4e4e\u662f\u5408\u4e4e\u903b\u8f91\u7684\uff0c\u4f46\u8bb8\u591a\u7a0b\u5e8f\u5458\u5e76\u4e0d\u8fd9\u6837\u505a\u3002\u4e3a\u4ec0\u4e48\u4e0d\u5462\uff1f\u4e5f\u8bb8\u4ed6\u4eec\u4e0d\u77e5\u9053\u5e93\u7684\u5b58\u5728\u3002",(0,n.kt)("strong",{parentName:"p"},"\u5728\u6bcf\u4e2a\u4e3b\u8981\u7248\u672c\u4e2d\uff0c\u90fd\u4f1a\u5411\u5e93\u4e2d\u6dfb\u52a0\u8bb8\u591a\u7279\u6027\uff0c\u4e86\u89e3\u8fd9\u4e9b\u65b0\u589e\u7279\u6027\u662f\u503c\u5f97\u7684\u3002")," \u6bcf\u6b21\u53d1\u5e03 Java \u5e73\u53f0\u7684\u4e3b\u8981\u7248\u672c\u65f6\uff0c\u90fd\u4f1a\u53d1\u5e03\u4e00\u4e2a\u63cf\u8ff0\u5176\u65b0\u7279\u6027\u7684 web \u9875\u9762\u3002\u8fd9\u4e9b\u9875\u9762\u975e\u5e38\u503c\u5f97\u4e00\u8bfb ","[Java8-feat, Java9-feat]","\u3002\u4e3a\u4e86\u5f3a\u8c03\u8fd9\u4e00\u70b9\uff0c\u5047\u8bbe\u4f60\u60f3\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\u6765\u6253\u5370\u547d\u4ee4\u884c\u4e2d\u6307\u5b9a\u7684 URL \u7684\u5185\u5bb9\uff08\u8fd9\u5927\u81f4\u662f Linux curl \u547d\u4ee4\u6240\u505a\u7684\uff09\u3002\u5728 Java 9 \u4e4b\u524d\uff0c\u8fd9\u6bb5\u4ee3\u7801\u6709\u70b9\u4e4f\u5473\uff0c\u4f46\u662f\u5728 Java 9 \u4e2d\uff0ctransferTo \u65b9\u6cd5\u88ab\u6dfb\u52a0\u5230 InputStream \u4e2d\u3002\u8fd9\u662f\u4e00\u4e2a\u4f7f\u7528\u8fd9\u4e2a\u65b0\u65b9\u6cd5\u6267\u884c\u8fd9\u9879\u4efb\u52a1\u7684\u5b8c\u6574\u7a0b\u5e8f\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"// Printing the contents of a URL with transferTo, added in Java 9\npublic static void main(String[] args) throws IOException {\n    try (InputStream in = new URL(args[0]).openStream()) {\n        in.transferTo(System.out);\n    }\n}\n")),(0,n.kt)("p",null,"The libraries are too big to study all the documentation ","[Java9-api]",", but ",(0,n.kt)("strong",{parentName:"p"},"every programmer should be familiar with the basics of java.lang, java.util, and java.io, and their subpackages.")," Knowledge of other libraries can be acquired on an as-needed basis. It is beyond the scope of this item to summarize the facilities in the libraries, which have grown immense over the years."),(0,n.kt)("p",null,"\u5e93\u592a\u5927\uff0c\u65e0\u6cd5\u5b66\u4e60\u6240\u6709\u6587\u6863 ","[Java9-api]","\uff0c\u4f46\u662f ",(0,n.kt)("strong",{parentName:"p"},"\u6bcf\u4e2a\u7a0b\u5e8f\u5458\u90fd\u5e94\u8be5\u719f\u6089 ",(0,n.kt)("inlineCode",{parentName:"strong"},"java.lang"),"\u3001",(0,n.kt)("inlineCode",{parentName:"strong"},"java.util")," \u548c ",(0,n.kt)("inlineCode",{parentName:"strong"},"java.io")," \u7684\u57fa\u7840\u77e5\u8bc6\u53ca\u5176\u5b50\u5305\u3002")," \u5176\u4ed6\u5e93\u7684\u77e5\u8bc6\u53ef\u4ee5\u6839\u636e\u9700\u8981\u83b7\u5f97\u3002\u6982\u8ff0\u5e93\u4e2d\u7684\u5de5\u5177\u8d85\u51fa\u4e86\u672c\u9879\u76ee\u7684\u8303\u56f4\uff0c\u8fd9\u4e9b\u5de5\u5177\u591a\u5e74\u6765\u5df2\u7ecf\u53d1\u5c55\u5f97\u975e\u5e38\u5e9e\u5927\u3002"),(0,n.kt)("p",null,"Several libraries bear special mention. The collections framework and the streams library (Items 45\u201348) should be part of every programmer\u2019s basic toolkit, as should parts of the concurrency utilities in java.util.concurrent. This package contains both high-level utilities to simplify the task of multithreaded programming and low-level primitives to allow experts to write their own higher-level concurrent abstractions. The highlevel parts of java.util.concurrent are discussed in Items 80 and 81."),(0,n.kt)("p",null,"\u6709\u51e0\u4e2a\u56fe\u4e66\u9986\u503c\u5f97\u4e00\u63d0\u3002collections \u6846\u67b6\u548c streams \u5e93\uff08\u53ef\u53c2\u770b Item 45-48\uff09\u5e94\u8be5\u662f\u6bcf\u4e2a\u7a0b\u5e8f\u5458\u7684\u57fa\u672c\u5de5\u5177\u5305\u7684\u4e00\u90e8\u5206\uff0c",(0,n.kt)("inlineCode",{parentName:"p"},"java.util.concurrent")," \u4e2d\u7684\u5e76\u53d1\u5b9e\u7528\u7a0b\u5e8f\u4e5f\u5e94\u8be5\u662f\u5176\u4e2d\u7684\u4e00\u90e8\u5206\u3002\u8fd9\u4e2a\u5305\u65e2\u5305\u542b\u9ad8\u7ea7\u7684\u5e76\u53d1\u5de5\u5177\u6765\u7b80\u5316\u591a\u7ebf\u7a0b\u7684\u7f16\u7a0b\u4efb\u52a1\uff0c\u8fd8\u5305\u542b\u4f4e\u7ea7\u522b\u7684\u5e76\u53d1\u57fa\u672c\u7c7b\u578b\uff0c\u5141\u8bb8\u4e13\u5bb6\u4eec\u81ea\u5df1\u7f16\u5199\u66f4\u9ad8\u7ea7\u7684\u5e76\u53d1\u62bd\u8c61\u3002",(0,n.kt)("inlineCode",{parentName:"p"},"java.util.concurrent")," \u7684\u9ad8\u7ea7\u90e8\u5206\uff0c\u5728 ",(0,n.kt)("a",{parentName:"p",href:"./Chapter-11/Chapter-11-Item-80-Prefer-executors,-tasks,-and-streams-to-threads"},"Item-80")," \u548c ",(0,n.kt)("a",{parentName:"p",href:"./Chapter-11/Chapter-11-Item-81-Prefer-concurrency-utilities-to-wait-and-notify"},"Item-81")," \u4e2d\u8ba8\u8bba\u3002"),(0,n.kt)("p",null,"Occasionally, a library facility can fail to meet your needs. The more specialized your needs, the more likely this is to happen. While your first impulse should be to use the libraries, if you\u2019ve looked at what they have to offer in some area and it doesn\u2019t meet your needs, then use an alternate implementation. There will always be holes in the functionality provided by any finite set of libraries. If you can\u2019t find what you need in Java platform libraries, your next choice should be to look in high-quality third-party libraries, such as Google\u2019s excellent, open source Guava library ","[Guava]",". If you can\u2019t find the functionality that you need in any appropriate library, you may have no choice but to implement it yourself."),(0,n.kt)("p",null,"\u6709\u65f6\uff0c\u7c7b\u5e93\u5de5\u5177\u53ef\u80fd\u65e0\u6cd5\u6ee1\u8db3\u4f60\u7684\u9700\u6c42\u3002\u4f60\u7684\u9700\u6c42\u8d8a\u4e13\u95e8\u5316\uff0c\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u7684\u53ef\u80fd\u6027\u5c31\u8d8a\u5927\u3002\u867d\u7136\u4f60\u7684\u7b2c\u4e00\u4e2a\u601d\u8def\u5e94\u8be5\u662f\u4f7f\u7528\u8fd9\u4e9b\u5e93\uff0c\u4f46\u662f\u5982\u679c\u4f60\u5df2\u7ecf\u4e86\u89e3\u4e86\u5b83\u4eec\u5728\u67d0\u4e9b\u9886\u57df\u63d0\u4f9b\u7684\u529f\u80fd\uff0c\u800c\u8fd9\u4e9b\u529f\u80fd\u4e0d\u80fd\u6ee1\u8db3\u4f60\u7684\u9700\u6c42\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528\u53e6\u4e00\u79cd\u5b9e\u73b0\u3002\u4efb\u4f55\u6709\u9650\u7684\u5e93\u96c6\u6240\u63d0\u4f9b\u7684\u529f\u80fd\u603b\u662f\u5b58\u5728\u6f0f\u6d1e\u3002\u5982\u679c\u4f60\u5728 Java \u5e73\u53f0\u5e93\u4e2d\u627e\u4e0d\u5230\u4f60\u9700\u8981\u7684\u4e1c\u897f\uff0c\u4f60\u7684\u4e0b\u4e00\u4e2a\u9009\u62e9\u5e94\u8be5\u662f\u5bfb\u627e\u9ad8\u8d28\u91cf\u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u6bd4\u5982\u8c37\u6b4c\u7684\u4f18\u79c0\u7684\u5f00\u6e90 Guava \u5e93 ","[Guava]","\u3002\u5982\u679c\u4f60\u65e0\u6cd5\u5728\u4efb\u4f55\u9002\u5f53\u7684\u5e93\u4e2d\u627e\u5230\u6240\u9700\u7684\u529f\u80fd\uff0c\u4f60\u53ef\u80fd\u522b\u65e0\u9009\u62e9\uff0c\u53ea\u80fd\u81ea\u5df1\u5b9e\u73b0\u5b83\u3002"),(0,n.kt)("p",null,"To summarize, don\u2019t reinvent the wheel. If you need to do something that seems like it should be reasonably common, there may already be a facility in the libraries that does what you want. If there is, use it; if you don\u2019t know, check. Generally speaking, library code is likely to be better than code that you\u2019d write yourself and is likely to improve over time. This is no reflection on your abilities as a programmer. Economies of scale dictate that library code receives far more attention than most developers could afford to devote to the same functionality."),(0,n.kt)("p",null,"\u603b\u800c\u8a00\u4e4b\uff0c\u4e0d\u8981\u767d\u8d39\u529b\u6c14\u91cd\u65b0\u53d1\u660e\u8f6e\u5b50\u3002\u5982\u679c\u4f60\u9700\u8981\u505a\u4e00\u4e9b\u770b\u8d77\u6765\u76f8\u5f53\u5e38\u89c1\u7684\u4e8b\u60c5\uff0c\u90a3\u4e48\u5e93\u4e2d\u53ef\u80fd\u5df2\u7ecf\u6709\u4e00\u4e2a\u5de5\u5177\u53ef\u4ee5\u505a\u4f60\u60f3\u505a\u7684\u4e8b\u60c5\u3002\u5982\u679c\u6709\uff0c\u4f7f\u7528\u5b83\uff1b\u5982\u679c\u4f60\u4e0d\u77e5\u9053\uff0c\u68c0\u67e5\u4e00\u4e0b\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5e93\u4ee3\u7801\u53ef\u80fd\u6bd4\u4f60\u81ea\u5df1\u7f16\u5199\u7684\u4ee3\u7801\u66f4\u597d\uff0c\u5e76\u4e14\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u53ef\u80fd\u4f1a\u5f97\u5230\u6539\u8fdb\u3002\u8fd9\u5e76\u4e0d\u53cd\u6620\u4f60\u4f5c\u4e3a\u4e00\u4e2a\u7a0b\u5e8f\u5458\u7684\u80fd\u529b\u3002\u89c4\u6a21\u7ecf\u6d4e\u51b3\u5b9a\u4e86\u5e93\u4ee3\u7801\u5f97\u5230\u7684\u5173\u6ce8\u8981\u8fdc\u8fdc\u8d85\u8fc7\u5927\u591a\u6570\u5f00\u53d1\u4eba\u5458\u6240\u80fd\u627f\u62c5\u7684\u76f8\u540c\u529f\u80fd\u3002"),(0,n.kt)("hr",null),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"./Chapter-9-Introduction"},"Back to contents of the chapter\uff08\u8fd4\u56de\u7ae0\u8282\u76ee\u5f55\uff09"))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Previous Item\uff08\u4e0a\u4e00\u6761\u76ee\uff09\uff1a",(0,n.kt)("a",{parentName:"strong",href:"./Chapter-9-Item-58-Prefer-for-each-loops-to-traditional-for-loops"},"Item 58: Prefer for-each loops to traditional for loops\uff08for-each \u5faa\u73af\u4f18\u4e8e\u4f20\u7edf\u7684 for \u5faa\u73af\uff09"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Next Item\uff08\u4e0b\u4e00\u6761\u76ee\uff09\uff1a",(0,n.kt)("a",{parentName:"strong",href:"./Chapter-9-Item-60-Avoid-float-and-double-if-exact-answers-are-required"},"Item 60: Avoid float and double if exact answers are required\uff08\u82e5\u9700\u8981\u7cbe\u786e\u7b54\u6848\u5c31\u5e94\u907f\u514d\u4f7f\u7528 float \u548c double \u7c7b\u578b\uff09")))))}m.isMDXComponent=!0}}]);